[supervisord]
nodaemon=true

[program:postgres]
command=/usr/lib/postgresql/14/bin/postgres -D /var/lib/postgresql/data
user=postgres
autostart=true
autorestart=true
stderr_logfile=/app/logs/postgres.err.log
stdout_logfile=/app/logs/postgres.out.log

[program:redis]
command=/usr/bin/redis-server
autostart=true
autorestart=true
stderr_logfile=/app/logs/redis.err.log
stdout_logfile=/app/logs/redis.out.log

[program:api]
command=/app/api-gateway/api-gateway
autostart=true
autorestart=true
stderr_logfile=/app/logs/api.err.log
stdout_logfile=/app/logs/api.out.log
environment=REDIS_URL="redis://localhost:6379",PRODUCT_SERVICE_URL="http://localhost:8001",INVENTORY_SERVICE_URL="http://localhost:8002"

[program:product]
command=python3 /app/product-service/main.py
autostart=true
autorestart=true
stderr_logfile=/app/logs/product.err.log
stdout_logfile=/app/logs/product.out.log
environment=DATABASE_URL="postgresql://admin:admin123@localhost:5432/microservices_db",REDIS_URL="redis://localhost:6379"

[program:inventory]
command=/app/inventory-service/inventory-service
autostart=true
autorestart=true
stderr_logfile=/app/logs/inventory.err.log
stdout_logfile=/app/logs/inventory.out.log
environment=DATABASE_URL="postgresql://admin:admin123@localhost:5432/microservices_db?sslmode=disable",REDIS_URL="localhost:6379"
